{% extends "base/new_outline/new_outline.html" %} 
{% block content %} 
{% load static %} 
{% load i18n %}
{% load crispy_forms_tags %}

<script src="{% static 'codemirror.js' %}"></script>
<link rel="stylesheet" href="{% static 'codemirror.css' %}">
<div class="row mb-5">
    <div class="col-12 col-lg-7">
        <div class=" w-100">
        <form method='POST'>
            {% csrf_token %}
                <h4>{{ form1.target.label_tag }} </h4>
                
                {{ form1.target }} 
                {% if form1.target.errors %}
                 {% for error in form1.target.errors %} {% if forloop.first %}
                
                <script>
                    document.addEventListener("DOMContentLoaded", function(event) {
                        $('.CodeMirror').addClass('CodeMirror-Invalid');
                        codemirror = $('.CodeMirror');
                        var codeMirrorEditor = codemirror[0].CodeMirror;
                        codeMirrorEditor.addLineClass(parseInt('{{error}}'), 'wrap', 'line-error');
                        codeMirrorEditor.scrollIntoView(parseInt('{{error}}'));
                    });
                </script>
                {% else %}
                <script>
                    document.addEventListener("DOMContentLoaded", function(event) {
                        codemirror = $('.CodeMirror');
                        var codeMirrorEditor = codemirror[0].CodeMirror;
                        codeMirrorEditor.addLineClass(parseInt('{{error}}'), 'wrap', 'line-error');
                    });
                </script>
                {% endif %} 
                {% endfor %}
                <div class="error-text">
                    <p>{% trans 'Incorrect data in' %} {{form1.target.errors|length}} {% trans 'lines.' %}
                        <a href="{% url 'base:documentation' %}#errors"> {% trans 'Why an error appeared?' %}</a>
                    </p>
                    <p>{% trans '*After clicking submit you will be transferred to first error*' %}</p>
                </div>

                {% endif %} 
                {% if form1.target.errors|length == 0 %} 
                
                {% for error in form1.errors %}
                <div class="error-text mb-3">
                    {% trans 'The text cannot be empty' %}
                </div>
                <script>
                    document.addEventListener("DOMContentLoaded", function(event) {
                        $('.CodeMirror').addClass('CodeMirror-Invalid');
                    });
                </script>
                {% endfor %} 

                {% endif %}

                <div class="btn-group my-3">
                <button class="btn btn-ocean" name="form1" type="submit">{% trans 'Save targets' %}</button>
                <a href="{% url 'base:planer_complete' instance.id %}" class="btn btn-outline-ocean" name="form1" type="submit">{% trans 'Create an outline' %}</a>
              </div>

              <h4 class="my-3"> {% trans 'Advanced general settings' %} </h4>
                <div class="accordion font-nav" id="outline-options">
                    <div class="card">
                      <div class="card-header" id="headingOne">
                        <h5 class="mb-0">

                          <button class="btn btn-link py-3 text-left card-header-button" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            {% trans '1. Available Troops' %}
                          </button>
                        </h5>
                      </div>
                  
                      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                        <div class="card-body">
                          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                        </div>
                      </div>
                    </div>




                    <div class="card">
                      <div class="card-header" id="headingTwo">
                        <h5 class="mb-0">

                          <button class="btn btn-link collapsed py-3 text-left card-header-button" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                            {% trans '2. Setting the date' %}
                          </button>
                        </h5>
                      </div>
                      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                        <div class="card-body">
                          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                        </div>
                      </div>
                    </div>





                    <div class="card">
                      <div class="card-header" id="headingThree">
                        <h5 class="mb-0">

                          <button class="btn btn-link collapsed py-3 text-left card-header-button" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                            {% trans '3. Mode selection' %}
                          </button>
                        </h5>
                      </div>
                      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                        <div class="card-body">
                          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                        </div>
                      </div>
                    </div>
                  </div>
            

            

        </form>
    </div>
    </div>



    <div class="col-12 col-lg-5">
        <div class="container-fluid md-pre h-100">
            <ul class="nav nav-pills mb-3 mt-1" id="pills-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-opis" role="tab" aria-controls="pills-home" aria-selected="true">{% trans 'Info' %}</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-przyklady" role="tab" aria-controls="pills-contact" aria-selected="false">{% trans 'Examples' %}</a>
                </li>
            </ul>
            <div class="tab-content font-nav" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-opis" role="tabpanel" aria-labelledby="pills-home-tab">
                    {{info|safe}}
                </div>

                <div class="tab-pane fade" id="pills-przyklady" role="tabpanel" aria-labelledby="pills-contact-tab">
                    {{example|safe}}
                </div>
            </div>
        </div>
    </div>



    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("id_target"), {
            lineNumbers: true,
        });
    </script>

</div>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
{% endblock %}