{% extends "base/base.html" %}
{% load static %}
{% load i18n %}

{% block showsidebar %}
<div class="d-flex toggled" id="wrapper">
    {% if user.is_authenticated %}
    <!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper">
        <div class="sidebar-heading">{% trans 'User Panel' %} </div>
        <div class="list-group list-group-flush">

            <a href="{% url 'base:planer' %}" class="list-group-item list-group-item-action
                  bg-light">{% trans 'My outlines' %}</a>
            <a href="{% url 'base:planer_create' %}" class="list-group-item list-group-item-action
                  bg-light">{% trans 'Create new outline' %}</a> {% block sidebar %}

            <a class=" list-group-item list-group-item-action
                  bg-secondary" href="{% url 'base:planer_detail' instance.id %}" role="button">{{instance.name}}</a>
            <a href="{% url 'base:planer_detail_results' instance.id %}" class="list-group-item list-group-item-action
                  bg-light">{% trans 'Results' %}</a>
            <a href="{% url 'base:planer_detail_get_deff' instance.id %}" class="list-group-item list-group-item-action
                  bg-light">{% trans 'Deff collection' %}</a>

            <a href="{% url 'base:planer_initial_form' instance.id %}" class="list-group-item list-group-item-action
                  bg-light">{% trans 'Planer' %}


                <div class="badge badge-info">BETA</div>

            </a> {%endblock%}
        </div>
    </div>
    {% endif %}

    <!-- /#sidebar-wrapper -->
    {% endblock %}

    {% block content %}

    <div class="row">
        <figure class="col-2">
            <img src='{% static "images/knight-2.jpg" %}' alt="knight" class="img-fluid">
        </figure>
        <div class="col-8">
            <div class="d-flex flex-column justify-content-center h-100">
                <div class="d-flex flex-row justify-content-center">
                    <h2>
                        <span class="badge badge-pill badge-info">
                            {{instance.name}}
                        </span>
                    </h2>
                </div>

                <div class="d-flex flex-row justify-content-center">
                    <h2>
                        <span class="badge badge-pill badge-info">
                            {{instance.date}}
                        </span>
                    </h2>
                </div>

                <div class="row justify-content-center">

                    <div>
                        <button type="button" class="btn btn-secondary btn-lg" data-toggle="modal"
                            data-target="#ValidationModal">
                            <b>{% trans 'Go back' %}</b>
                        </button>
                    </div>

                    <div class="modal fade" id="ValidationModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="ValidationModalTitle">{% trans 'Warning' %}</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    {% blocktrans %} Current progress will be
                                    <div class="md-error">LOST!</div>
                                    <br>You will return to the previous form. {% endblocktrans %}

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-dismiss="modal"><b>{% trans 'Close' %}</b></button>
                                    <form method="POST">
                                        {% csrf_token %}
                                        <button name="form1" type="submit" class="btn btn-primary">
                                            {% trans 'Continue' %}
                                        </button>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>









                </div>

            </div>
        </div>
        <figure class="col-2">
            <img src='{% static "images/knight-2.jpg" %}' alt="knight" class="img-fluid">
        </figure>
    </div>
    <nav aria-label="pagination" id="pagination" class="mt-3">
        <ul class="pagination">
            {% if query.has_previous %}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{ query.previous_page_number }}&mode={{ mode }}">{% trans 'Previous' %}</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link">{% trans 'Previous' %}</a>
            </li>
            {% endif %}
            <li class="page-item disabled">
                <a class="page-link">{{ query.number }} {% trans 'of' %} {{ query.paginator.num_pages }}</a>
            </li>
            {% if query.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ query.next_page_number }}&mode={{ mode }}">{% trans 'Next' %}</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link">{% trans 'Next' %}</a>
            </li>
            {% endif %}
            <li class="page-item ml-1">
                {% if mode == 'menu' %}
                <a href="?page={{ query.number }}&mode=menu" class="page-link paint" data-toggle="tooltip" data-placement="top" title="{% trans 'Set real targets' %}"><svg width="1.2em" height="1.2em"
                        viewBox="0 0 16 16" class="bi bi-menu-button-wide-fill" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M14 7H2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM2 6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H2z" />
                        <path fill-rule="evenodd"
                            d="M15 11H1v-1h14v1zM2 12.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM1.5 0A1.5 1.5 0 0 0 0 1.5v2A1.5 1.5 0 0 0 1.5 5h13A1.5 1.5 0 0 0 16 3.5v-2A1.5 1.5 0 0 0 14.5 0h-13zm1 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm9.927.427l.396.396a.25.25 0 0 0 .354 0l.396-.396A.25.25 0 0 0 13.396 2h-.792a.25.25 0 0 0-.177.427z" />
                    </svg></a> {% else %}
                <a href="?page={{ query.number }}&mode=menu" class="page-link" data-toggle="tooltip" data-placement="top" title="{% trans 'Set real targets' %}"><svg width="1.2em" height="1.2em"
                        viewBox="0 0 16 16" class="bi bi-menu-button-wide-fill" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M14 7H2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM2 6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H2z" />
                        <path fill-rule="evenodd"
                            d="M15 11H1v-1h14v1zM2 12.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM1.5 0A1.5 1.5 0 0 0 0 1.5v2A1.5 1.5 0 0 0 1.5 5h13A1.5 1.5 0 0 0 16 3.5v-2A1.5 1.5 0 0 0 14.5 0h-13zm1 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm9.927.427l.396.396a.25.25 0 0 0 .354 0l.396-.396A.25.25 0 0 0 13.396 2h-.792a.25.25 0 0 0-.177.427z" />
                    </svg></a> {% endif %}

            </li>

            <li class="page-item">
                {% if mode == 'fake' %}
                <a href="?page={{ query.number }}&mode=fake" class="page-link paint" data-toggle="tooltip" data-placement="top" title="{% trans 'Set fake targets' %}">
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em"
                        viewBox="0 0 782.000000 1280.000000" preserveAspectRatio="xMidYMid meet">
                        <metadata>
                            Created by potrace 1.15, written by Peter Selinger 2001-2017
                        </metadata>
                        <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor"
                            stroke="none">
                            <path d="M3285 12355 c-1364 -244 -2500 -449 -2525 -455 -25 -6 -85 -31 -135
                            -55 -336 -163 -584 -568 -621 -1012 -3 -43 -1 -404 5 -803 12 -772 25 -1614
                            41 -2740 6 -382 15 -1001 20 -1375 25 -1645 50 -3398 55 -3850 7 -582 16 -737
                            49 -868 64 -251 213 -457 404 -555 42 -22 358 -168 702 -325 436 -199 647
                            -290 697 -301 503 -112 1026 413 1078 1084 4 47 2 375 -4 730 -26 1582 -43
                            2931 -37 2937 4 4 769 143 1701 310 1322 236 1710 308 1763 329 119 48 202
                            104 308 209 233 230 363 530 381 885 19 371 -130 722 -375 883 -37 25 -218
                            113 -402 197 -184 84 -482 219 -662 301 -188 86 -355 156 -395 165 -123 29
                            -195 19 -1304 -180 -570 -102 -1043 -186 -1051 -186 -12 0 -16 126 -26 846 -7
                            466 -10 849 -7 852 3 3 920 168 2037 368 1231 220 2065 373 2113 388 271 87
                            525 362 644 699 143 405 88 855 -138 1140 -57 72 -151 151 -221 187 -19 10
                            -323 149 -675 310 -394 180 -669 299 -714 311 -43 11 -106 19 -150 18 -54 0
                            -807 -131 -2556 -444z" />
                        </g>
                    </svg>
                </a>
                {% else %}
                <a href="?page={{ query.number }}&mode=fake" class="page-link" data-toggle="tooltip" data-placement="top" title="{% trans 'Set fake targets' %}">
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em"
                        viewBox="0 0 782.000000 1280.000000" preserveAspectRatio="xMidYMid meet">
                        <metadata>
                            Created by potrace 1.15, written by Peter Selinger 2001-2017
                        </metadata>
                        <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor"
                            stroke="none">
                            <path d="M3285 12355 c-1364 -244 -2500 -449 -2525 -455 -25 -6 -85 -31 -135
                            -55 -336 -163 -584 -568 -621 -1012 -3 -43 -1 -404 5 -803 12 -772 25 -1614
                            41 -2740 6 -382 15 -1001 20 -1375 25 -1645 50 -3398 55 -3850 7 -582 16 -737
                            49 -868 64 -251 213 -457 404 -555 42 -22 358 -168 702 -325 436 -199 647
                            -290 697 -301 503 -112 1026 413 1078 1084 4 47 2 375 -4 730 -26 1582 -43
                            2931 -37 2937 4 4 769 143 1701 310 1322 236 1710 308 1763 329 119 48 202
                            104 308 209 233 230 363 530 381 885 19 371 -130 722 -375 883 -37 25 -218
                            113 -402 197 -184 84 -482 219 -662 301 -188 86 -355 156 -395 165 -123 29
                            -195 19 -1304 -180 -570 -102 -1043 -186 -1051 -186 -12 0 -16 126 -26 846 -7
                            466 -10 849 -7 852 3 3 920 168 2037 368 1231 220 2065 373 2113 388 271 87
                            525 362 644 699 143 405 88 855 -138 1140 -57 72 -151 151 -221 187 -19 10
                            -323 149 -675 310 -394 180 -669 299 -714 311 -43 11 -106 19 -150 18 -54 0
                            -807 -131 -2556 -444z" />
                        </g>
                    </svg>
                </a>
                {% endif %}
            </li>

            <li class="page-item">
                {% if mode == 'time' %}
                <a href="?page={{ query.number }}&mode=time" class="page-link paint" data-toggle="tooltip" data-placement="top" title="{% trans 'Set time and confirm' %}"><svg width="1.2em" height="1.2em"
                        viewBox="0 0 16 16" class="bi bi-clock" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm8-7A8 8 0 1 1 0 8a8 8 0 0 1 16 0z" />
                        <path fill-rule="evenodd"
                            d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z" />
                    </svg></a> {% else %}
                <a href="?page={{ query.number }}&mode=time" class="page-link" data-toggle="tooltip" data-placement="top" title="{% trans 'Set time and confirm' %}"><svg width="1.2em" height="1.2em"
                        viewBox="0 0 16 16" class="bi bi-clock" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm8-7A8 8 0 1 1 0 8a8 8 0 0 1 16 0z" />
                        <path fill-rule="evenodd"
                            d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z" />
                    </svg></a> {% endif %}
            </li>
            

        </ul>
    </nav>

    <div class="conatiner-fluid" style="width: min-content;">

        <table class="table table-sm table-bordered">
            <thead>
                <tr>
                    <th scope="col">{% trans 'Fake Target' %}</th>
                    <th colspan="50" scope="colgroup">{% trans 'Fake Outline' %}</th>
                </tr>
            </thead>
            <tbody>

                {% for target, lst in query %}
                <tr>

                    <th>



                        <div class="d-flex justify-content-center">
                            <h5>
                                <span class="badge badge-pill badge-info">
                                    {{target.player}}
                                </span>
                            </h5>
                        </div>
                        <div class="d-flex justify-content-center">

                            <h5>
                                <span class="badge badge badge-secondary">
                                    {{target.target}}
                                </span>
                            </h5>

                        </div>
                        <div class="d-flex justify-content-center">
                            <h5>
                                <a target="_blank" href="{{target.get_absolute_url}}"
                                    class="btn btn-sm btn-outline-info">
                                    {% trans 'Edit' %}
                                </a>
                            </h5>
                        </div>



                    </th>

                    {% for weight in lst %}

                    <th class="front-{{weight.first_line}}">
                        <div class="popoverData" data-html="true"
                            data-content="<h4><span class='badge badge-pill badge-info'>{{weight.player}}</span></h4><div class='d-flex justify-content-center'><h5><span class='badge badge badge-secondary'>{{weight.start}}</span></h5></div>"
                            rel="popover" data-placement="top" data-trigger="hover">
                            <table class="table table-sm">
                                    <tr>
                                        <th>
                                            <img src='{% static "images/ax.png" %}' alt="ax">
                                        </th>
                                        <th style="font-size: small;">
                                            {{weight.off}}
                                        </th>

                                    </tr>
                                    <tr>
                                        <th>
                                            <img src='{% static "images/nobleman.png" %}' alt="ax">
                                        </th>
                                        <th style="font-size: small;">
                                            {{weight.nobleman}}
                                        </th>

                                    </tr>
                                    <tr>
                                        <th>
                                            <svg width="1.3em" height="1.3em" viewBox="0 0 16 16" class="bi bi-signpost"
                                                fill="#6c757d" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 1.414V4h2V1.414a1 1 0 0 0-2 0z" />
                                                <path fill-rule="evenodd"
                                                    d="M12.532 5H2v4h10.532l1.666-2-1.666-2zM2 4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h10.532a1 1 0 0 0 .768-.36l1.933-2.32a.5.5 0 0 0 0-.64L13.3 4.36a1 1 0 0 0-.768-.36H2z" />
                                                <path d="M7 10h2v6H7v-6z" />
                                            </svg>
                                        </th>
                                        <th style="font-size: small;">
                                            {{weight.distance}}
                                        </th>

                                    </tr>


                                </table>





                    </th>
                    {% endfor %}


                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            $('.popoverData').popover();
        });
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
          })
    </script>

    {% endblock %}