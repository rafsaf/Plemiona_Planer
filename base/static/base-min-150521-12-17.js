const modal=()=>{document.addEventListener("DOMContentLoaded",function(e){$("#form-modal").on("show.bs.modal",function(e){var r=$(e.relatedTarget),o=r.data("start"),a=r.data("off"),t=r.data("leftoff"),n=r.data("nobleman"),i=r.data("leftnobleman"),d=r.data("id"),l=$(this);l.find(".modal-title").text(o),l.find("#id_off").val(a),l.find("#id_off").attr("max",parseInt(a)+parseInt(t)),l.find("#id_nobleman").val(n),l.find("#id_nobleman").attr("max",parseInt(n)+parseInt(i)),l.find("#id_weight_id").val(d)}),$(".popoverData").popover(),$(".popoverOption").popover({trigger:"hover"})})},scroll_content_outline=()=>{$(window).on("load",function(){null!=localStorage.getItem("my_app_name_here-quote-scroll")&&$(window).scrollTop(localStorage.getItem("my_app_name_here-quote-scroll")),null!=localStorage.getItem("my_app_name_here-left-scroll")&&$("#leftscroll").scrollTop(localStorage.getItem("my_app_name_here-left-scroll")),$(window).on("scroll",function(){localStorage.setItem("my_app_name_here-quote-scroll",$(window).scrollTop())}),$("#leftscroll").on("scroll",function(){var e=$("#leftscroll").scrollTop();localStorage.setItem("my_app_name_here-left-scroll",e)})})},menu_toggle=()=>{$("#menu-toggle").click(function(e){e.preventDefault(),$("#sidebar-wrapper").toggleClass("toggled")}),$(document).ready(function(){$("#id_date").addClass("data-picker"),$(".data-picker").datepicker({format:"yyyy-mm-dd"})})},calculate_distance=e=>{const r=parseFloat(String(document.getElementById("speed_world").value).replace(",",".")),o=parseFloat(String(document.getElementById("speed_units").value).replace(",","."));if(e.clicked)e.innerHTML=e.distance,e.clicked=!1;else{e.distance=parseFloat(e.innerHTML);let a=e.distance/o/r/60*30;a=a>99.9?a.toFixed(0):a.toFixed(1);let t=e.distance/o/r/60*35;t=t>99.9?t.toFixed(0):t.toFixed(1),e.innerHTML=`<span class='text-nowrap'>${a}h / ${t}h</span>`,e.clicked=!0}};function labnolIframe(e){var r=document.createElement("iframe");r.setAttribute("src","https://www.youtube.com/embed/"+e.dataset.id+"?autoplay=1&rel=0"),r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","1"),r.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),e.parentNode.replaceChild(r,e)}function initYouTubeVideos(){for(var e=document.getElementsByClassName("youtube-player"),r=0;r<e.length;r++){var o=e[r].dataset.id,a=document.createElement("div");a.setAttribute("data-id",o);var t=document.createElement("img");t.src="//i.ytimg.com/vi/ID/hqdefault.jpg".replace("ID",o),a.appendChild(t);var n=document.createElement("div");n.setAttribute("class","play"),a.appendChild(n),a.onclick=function(){labnolIframe(this)},e[r].appendChild(a)}}const activateTooltips=()=>{document.addEventListener("DOMContentLoaded",function(e){$(".popoverData").popover()}),$(function(){$('[data-toggle="tooltip"]').tooltip()})},onPlanerLinkClick=e=>{setTimeout(()=>{document.getElementById("planer-link").innerHTML=`<span class='spinner-border mr-1 spinner-border-sm text-info my-auto' role='status'></span>${e}`},800)},handleAllFormsetSelect=()=>{document.addEventListener("DOMContentLoaded",function(e){val=$("#id_form-0-status").val(),"all"===val?($("#id_form-0-from_number").val(""),$("#id_form-0-from_number").prop("disabled",!0),$("#id_form-0-to_number").val(""),$("#id_form-0-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-0-from_number").val(""),$("#id_form-0-from_number").prop("disabled",!0),$("#id_form-0-to_number").prop("disabled",!1)),val=$("#id_form-1-status").val(),"all"===val?($("#id_form-1-from_number").val(""),$("#id_form-1-from_number").prop("disabled",!0),$("#id_form-1-to_number").val(""),$("#id_form-1-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-1-from_number").val(""),$("#id_form-1-from_number").prop("disabled",!0),$("#id_form-1-to_number").prop("disabled",!1)),val=$("#id_form-2-status").val(),"all"===val?($("#id_form-2-from_number").val(""),$("#id_form-2-from_number").prop("disabled",!0),$("#id_form-2-to_number").val(""),$("#id_form-2-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-2-from_number").val(""),$("#id_form-2-from_number").prop("disabled",!0),$("#id_form-2-to_number").prop("disabled",!1)),val=$("#id_form-3-status").val(),"all"===val?($("#id_form-3-from_number").val(""),$("#id_form-3-from_number").prop("disabled",!0),$("#id_form-3-to_number").val(""),$("#id_form-3-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-3-from_number").val(""),$("#id_form-3-from_number").prop("disabled",!0),$("#id_form-3-to_number").prop("disabled",!1)),val=$("#id_form-4-status").val(),"all"===val?($("#id_form-4-from_number").val(""),$("#id_form-4-from_number").prop("disabled",!0),$("#id_form-4-to_number").val(""),$("#id_form-4-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-4-from_number").val(""),$("#id_form-4-from_number").prop("disabled",!0),$("#id_form-4-to_number").prop("disabled",!1)),val=$("#id_form-5-status").val(),"all"===val?($("#id_form-5-from_number").val(""),$("#id_form-5-from_number").prop("disabled",!0),$("#id_form-5-to_number").val(""),$("#id_form-5-to_number").prop("disabled",!0)):"exact"===val&&($("#id_form-5-from_number").val(""),$("#id_form-5-from_number").prop("disabled",!0),$("#id_form-5-to_number").prop("disabled",!1))}),document.addEventListener("DOMContentLoaded",function(e){$(".time-timepicker").each(function(){$(this).timepicker({minuteStep:1,secondStep:1,showSeconds:!0,showMeridian:!1,defaultTime:!1,icons:{up:"fa fa-angle-up",down:"fa fa-angle-down"}})}),$("#id_form-0-status").change(function(){val=$("#id_form-0-status").val(),"all"===val?($("#id_form-0-from_number").val(""),$("#id_form-0-from_number").prop("disabled",!0),$("#id_form-0-to_number").val(""),$("#id_form-0-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-0-from_number").val(""),$("#id_form-0-from_number").prop("disabled",!0),$("#id_form-0-to_number").prop("disabled",!1)):($("#id_form-0-from_number").prop("disabled",!1),$("#id_form-0-to_number").prop("disabled",!1))}),$("#id_form-1-status").change(function(){val=$("#id_form-1-status").val(),"all"===val?($("#id_form-1-from_number").val(""),$("#id_form-1-from_number").prop("disabled",!0),$("#id_form-1-to_number").val(""),$("#id_form-1-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-1-from_number").val(""),$("#id_form-1-from_number").prop("disabled",!0),$("#id_form-1-to_number").prop("disabled",!1)):($("#id_form-1-from_number").prop("disabled",!1),$("#id_form-1-to_number").prop("disabled",!1))}),$("#id_form-2-status").change(function(){val=$("#id_form-2-status").val(),"all"===val?($("#id_form-2-from_number").val(""),$("#id_form-2-from_number").prop("disabled",!0),$("#id_form-2-to_number").val(""),$("#id_form-2-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-2-from_number").val(""),$("#id_form-2-from_number").prop("disabled",!0),$("#id_form-2-to_number").prop("disabled",!1)):($("#id_form-2-from_number").prop("disabled",!1),$("#id_form-2-to_number").prop("disabled",!1))}),$("#id_form-3-status").change(function(){val=$("#id_form-3-status").val(),"all"===val?($("#id_form-3-from_number").val(""),$("#id_form-3-from_number").prop("disabled",!0),$("#id_form-3-to_number").val(""),$("#id_form-3-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-3-from_number").val(""),$("#id_form-3-from_number").prop("disabled",!0),$("#id_form-3-to_number").prop("disabled",!1)):($("#id_form-3-from_number").prop("disabled",!1),$("#id_form-3-to_number").prop("disabled",!1))}),$("#id_form-4-status").change(function(){val=$("#id_form-4-status").val(),"all"===val?($("#id_form-4-from_number").val(""),$("#id_form-4-from_number").prop("disabled",!0),$("#id_form-4-to_number").val(""),$("#id_form-4-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-4-from_number").val(""),$("#id_form-4-from_number").prop("disabled",!0),$("#id_form-4-to_number").prop("disabled",!1)):($("#id_form-4-from_number").prop("disabled",!1),$("#id_form-4-to_number").prop("disabled",!1))}),$("#id_form-5-status").change(function(){val=$("#id_form-5-status").val(),"all"===val?($("#id_form-5-from_number").val(""),$("#id_form-5-from_number").prop("disabled",!0),$("#id_form-5-to_number").val(""),$("#id_form-5-to_number").prop("disabled",!0)):"exact"===val?($("#id_form-5-from_number").val(""),$("#id_form-5-from_number").prop("disabled",!0),$("#id_form-5-to_number").prop("disabled",!1)):($("#id_form-5-from_number").prop("disabled",!1),$("#id_form-5-to_number").prop("disabled",!1))})})},handleClickButton=(e,r,o)=>{e.disabled=!0,e.innerHTML=`<span class='spinner-border mr-1 spinner-border-sm text-dark my-auto' role='status'></span>${r}`,document.getElementById(o).submit()};function getCookie(e){var r=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var t=jQuery.trim(o[a]);if(t.substring(0,e.length+1)==e+"="){r=decodeURIComponent(t.substring(e.length+1));break}}return r}const changeTargetTime=async(e,r)=>{const o=parseInt(e),a=parseInt(r),t=String(e)+"-time-"+String(r),n=document.getElementById(t),i=n.innerHTML;n.innerHTML='<div class="spinner-border spinner-border-sm text-secondary" role="status"></div>';const d=await fetch(`/api/target-time-update/${o}/${a}/`,{method:"PUT",credentials:"same-origin",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"}});if(200!==d.status){n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>';const e=n.className;n.className="btn btn-lg btn-danger my-1 py-0 px-1 mr-1",setTimeout(()=>{n.className=e,n.innerHTML=i,n.blur()},2e3)}else{const e=await d.json();if(n.className="btn btn-lg btn-primary my-1 py-0 px-1 mr-1",n.innerHTML=i,n.blur(),"none"!==e.old&&e.old!==e.new){document.getElementById(e.old).className="btn btn-lg btn-light my-1 py-0 px-1 mr-1"}}},deleteTarget=async e=>{const r=parseInt(e),o="target-btn-"+String(e),a="target-row-"+String(e),t=document.getElementById(o),n=document.getElementById(a),i=t.innerHTML;t.disabled=!0,t.innerHTML='<div class="spinner-border spinner-border-sm text-secondary" role="status"></div>',204!==(await fetch(`/api/target-delete/${r}/`,{method:"DELETE",credentials:"same-origin",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"}})).status?(t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>',setTimeout(()=>{t.innerHTML=i,t.blur()},2e3)):n.style.display="none"},submitGoBackButton=e=>{const r=document.getElementById("form1-btn"),o=document.getElementById("dismiss-btn");r.onclick=(()=>{r.disabled=!0,o.disabled=!0,r.innerHTML=`<span class='spinner-border mr-1 spinner-border-sm text-dark my-auto' role='status'></span>${e}`,document.getElementById("form1-form").submit()})},changeIsHiddenState=async(e,r)=>{const o=document.getElementById(r),a=o.innerHTML;o.disabled=!0,o.innerHTML='<div class="spinner-border spinner-border-sm text-secondary" role="status"></div>';const t=await fetch(`/api/overview-hide-state-update/${e}/${r}/`,{method:"PUT",credentials:"same-origin",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"}});if(200!==t.status)o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>',setTimeout(()=>{o.innerHTML=a,o.blur()},2e3);else{const e=await t.json();o.innerHTML=e.name,o.className=e.class,o.disabled=!1,o.blur()}},changeBuildingsArray=async(e,r)=>{const o=document.getElementById("multi-select-spinner");o.innerHTML='<div class="spinner-border spinner-border-sm text-secondary" role="status"></div>';const a={buildings:r};await fetch(`/api/change-buildings-array/${e}/`,{method:"PUT",credentials:"same-origin",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>{200===e.status?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="green" class="bi bi-check" viewBox="0 0 16 16"><path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/></svg>',setTimeout(()=>{o.innerHTML=""},400)):(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-exclamation-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg> <span class="md-error">(Error in connection!)</span>',setTimeout(()=>{o.innerHTML=""},2e3))}).catch(()=>{o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-exclamation-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg> <span class="md-error">(Error in connection!)</span>',setTimeout(()=>{o.innerHTML=""},2e3)})},resetUserMessages=async()=>{const e=document.getElementById("reset-svg"),r=document.getElementById("reset-span");await fetch("/api/reset-user-messages/",{method:"PUT",credentials:"same-origin",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"}}).then(o=>{200===o.status&&(e.style.fill="black",r.style.color="black",r.innerHTML="0")})},codemirrorValidation=(e,r)=>{document.addEventListener("DOMContentLoaded",function(o){$(r).addClass("CodeMirror-Invalid");const a=$(r)[0].CodeMirror,t=JSON.parse(e);Object.entries(t).forEach(([e,r],o)=>{0===o&&a.scrollIntoView(parseInt(r.message)),a.addLineClass(parseInt(r.message),"wrap","line-error")})})},handleButtonClipboardUpdate=(e,r,o,a)=>{const t=document.getElementById(r).textContent;navigator.clipboard.writeText(t),e.innerHTML=`<svg class='mr-2' width='1.4em' height='1.4em' viewBox='0 0 16 16' class='bi bi-check2-all' fill='green' ><path fill-rule='evenodd' d='M12.354 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z'/><path d='M6.25 8.043l-.896-.897a.5.5 0 1 0-.708.708l.897.896.707-.707zm1 2.414l.896.897a.5.5 0 0 0 .708 0l7-7a.5.5 0 0 0-.708-.708L8.5 10.293l-.543-.543-.707.707z'/></svg>${o}`,setTimeout(()=>{e.innerHTML=`<svg class='mr-2'  width='1.3em' height='1.3em' viewBox='0 0 16 16' class='bi bi-arrow-counterclockwise' fill='currentColor'><path fill-rule='evenodd' d='M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z'/><path d='M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z'/></svg>${a}`,e.blur()},1800)};